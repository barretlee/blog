<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><title>HTTPSè¯ä¹¦ç”ŸæˆåŸç†å’Œéƒ¨ç½²ç»†èŠ‚ | å°èƒ¡å­å“¥çš„ä¸ªäººç½‘ç«™</title><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,height=device-height,initial-scale=1,user-scalable=0"><meta name="author" content="https://plus.google.com/112634278852964994392?hl=zh-cn"><meta name="email" content="barret.china@gmail.com"><meta name="description" content="ä»Šå¤©æ‘¸ç´¢äº†ä¸‹ HTTPS çš„è¯ä¹¦ç”Ÿæˆï¼Œä»¥åŠä»–åœ¨ Nginx ä¸Šçš„éƒ¨ç½²ã€‚ç”±äºåšå®¢æ‰˜ç®¡åœ¨ github ä¸Šï¼Œæ²¡åŠæ³•éƒ¨ç½²è¯ä¹¦ï¼Œå…ˆè®°å½•ä¸‹ï¼Œåç»­æœ‰éœ€è¦æ–¹ä¾¿å¿«æ·æ“ä½œã€‚"><meta property="og:type" content="article"><meta property="og:title" content="HTTPSè¯ä¹¦ç”ŸæˆåŸç†å’Œéƒ¨ç½²ç»†èŠ‚ | å°èƒ¡å­å“¥çš„ä¸ªäººç½‘ç«™"><meta property="og:url" content="https://www.barretlee.com/blog/2015/10/05/how-to-build-a-https-server/"><meta property="og:site_name" content="HTTPSè¯ä¹¦ç”ŸæˆåŸç†å’Œéƒ¨ç½²ç»†èŠ‚"><meta property="og:description" content="ä»Šå¤©æ‘¸ç´¢äº†ä¸‹ HTTPS çš„è¯ä¹¦ç”Ÿæˆï¼Œä»¥åŠä»–åœ¨ Nginx ä¸Šçš„éƒ¨ç½²ã€‚ç”±äºåšå®¢æ‰˜ç®¡åœ¨ github ä¸Šï¼Œæ²¡åŠæ³•éƒ¨ç½²è¯ä¹¦ï¼Œå…ˆè®°å½•ä¸‹ï¼Œåç»­æœ‰éœ€è¦æ–¹ä¾¿å¿«æ·æ“ä½œã€‚"><meta name="generator" content="https://hexo.io"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><link href="https://img.alicdn.com/imgextra/i4/O1CN01LKRotr20M1ZGJkT3v_!!6000000006834-2-tps-1200-1200.png" rel="apple-touch-icon-precomposed"><link rel="shoticon" href="https://img.alicdn.com/imgextra/i3/O1CN01EVx62B1eyZLyJsJnY_!!6000000003940-2-tps-100-100.png" type="image/x-icon"><link rel="alternate" type="application/rss+xml" href="https://www.barretlee.com/rss2.xml" title="å°èƒ¡å­å“¥çš„ä¸ªäººç½‘ç«™"><link rel="prev" href="https://www.barretlee.com/blog/2015/10/07/debug-nodejs-in-command-line/" title="NodeJSçš„ä»£ç è°ƒè¯•å’Œæ€§èƒ½è°ƒä¼˜"><link rel="next" href="https://www.barretlee.com/blog/2015/09/30/confusion-about-for-loop-var/" title="JavaScript å…³äº for å¾ªç¯ä¸­çš„ç–‘é—®"><link rel="start" href="https://www.barretlee.com/entry/" title="Blog Entry"><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/barretlee/blog@gh-pages/public/css/style-20230627-2.css"></head><body><div class="rainbow"></div><div class="container"><span class="local-search local-search-google local-search-plugin" style="display:none"><input type="search" placeholder="ç«™å†…æœç´¢" id="local-search-input" class="local-search-input-cls"> <i class="icon" aria-hidden="true" title="ç‚¹å‡»è¿›å…¥ Google æœç´¢">&#x2708;</i><div id="local-search-result" class="local-search-result-cls"></div></span><div class="article" itemscope itemtype="http://schema.org/Article"><div class="post"><div class="bread"><a href="/">å°èƒ¡å­å“¥çš„ä¸ªäººç½‘ç«™</a> Â» <a href="/entry/">åšå®¢</a> Â» <a class="category-link" href="/blog/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/">ç½‘ç»œå®‰å…¨</a></div><div class="post-title-wrapper"><h1 class="post-title" itemprop="name">HTTPSè¯ä¹¦ç”ŸæˆåŸç†å’Œéƒ¨ç½²ç»†èŠ‚</h1><a href="/about/"><img style="max-width:120px" src="https://img.alicdn.com/imgextra/i1/O1CN01zmj6R326ehPa0NZO2_!!6000000007687-2-tps-1200-1200.png" alt="Barretæé–"></a></div><div class="post-info"><span>ä½œè€…: <a href="/about/">Barretæé–</a></span> <span><time itemprop="timeCreated" aria-hidden="true">2015-10-05 15:29:39</time> <span class="aria-readonly">æœ¬æ–‡å‘å¸ƒæ—¶é—´ä¸º2015å¹´10æœˆ05æ—¥15æ—¶29åˆ†39ç§’</span> </span><span>åˆ†ç±»: <a class="category-link" href="/blog/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/">ç½‘ç»œå®‰å…¨</a> </span><span tabindex="0" aria-hidden="true">æ ‡ç­¾: <a class="article-tag-none-link" href="/blog/tags/HTTPS/" rel="tag">HTTPS</a> </span><span class="aria-readonly">ä¸‹é¢æ˜¯æ­£æ–‡å†…å®¹</span> <span tabindex="0" aria-hidden="true">è¯„è®ºæ•°: <a href="#comments" class="ds-thread-count hash-to-comments disqus-comment-count" data-thread-key="how-to-build-a-https-server" data-disqus-identifier="how-to-build-a-https-server"></a></span></div><div class="post-content" itemprop="articleBody"><p>ä»Šå¤©æ‘¸ç´¢äº†ä¸‹ HTTPS çš„è¯ä¹¦ç”Ÿæˆï¼Œä»¥åŠå®ƒåœ¨ Nginx ä¸Šçš„éƒ¨ç½²ã€‚ç”±äºåšå®¢æ‰˜ç®¡åœ¨ github ä¸Šï¼Œæ²¡åŠæ³•éƒ¨ç½²è¯ä¹¦ï¼Œå…ˆè®°å½•ä¸‹ï¼Œåç»­æœ‰éœ€è¦æ–¹ä¾¿å¿«æ·æ“ä½œã€‚æœ¬æ–‡çš„é˜è¿°ä¸ä¸€å®šå®Œå–„ï¼Œä½†æ˜¯å¯ä»¥è®©ä¸€ä¸ªåˆå­¦è€…äº†è§£å¤§è‡´çš„åŸç†ï¼ŒåŒæ—¶è·Ÿç€æ“ä½œå¯ä»¥ä¸ºè‡ªå·±çš„åšå®¢&#x2F;ç½‘ç«™éƒ¨ç½²ä¸€ä¸ª HTTPS è¯ä¹¦ã€‚</p><p><a href="//www.hallaminternet.com/assets/https.jpg"><img src="https://raw.githubusercontent.com/barretlee/blog/gh-pages/blogimgs/2015/10/05/20151001_65a3140b.jpg" alt="https"></a></p><span id="more"></span><h3 id="ç½‘ç«™éƒ¨ç½²-HTTPS-çš„é‡è¦æ€§"><a href="#ç½‘ç«™éƒ¨ç½²-HTTPS-çš„é‡è¦æ€§" class="headerlink" title="ç½‘ç«™éƒ¨ç½² HTTPS çš„é‡è¦æ€§"></a>ç½‘ç«™éƒ¨ç½² HTTPS çš„é‡è¦æ€§</h3><p>çœ‹çœ‹ä¸‹é¢ï¼Œéƒ¨åˆ†ç”µä¿¡ç”¨æˆ·è®¿é—®äº¬ä¸œé¦–é¡µçš„æ—¶å€™ï¼Œä¼šçœ‹åˆ°å³ä¸‹è§’æœ‰ä¸€ä¸ªæµ®åŠ¨å¹¿å‘Šï¼š</p><p><img src="https://raw.githubusercontent.com/barretlee/blog/gh-pages/blogimgs/2015/10/05/20151001_b342b301.jpg" alt="äº¬ä¸œé¦–é¡µè¢«ç”µä¿¡DNSæ³¨å…¥"></p><p>å°ç™½ç”¨æˆ·ä»¥ä¸ºæ˜¯äº¬ä¸œæœ‰æ„æ”¾ç½®çš„ï¼Œç»†å¿ƒçš„ç”¨æˆ·ä¼šå‘ç°ï¼Œè¿™ä¸ª iframe ä¸€å±‚åµŒä¸€å±‚çš„æ¶å¿ƒå¹¿å‘Šå¾ˆæ˜æ˜¾æ˜¯ç”µä¿¡&#x2F;ä¸­é—´äººé€šè¿‡ DNS åŠ«æŒæ³¨å…¥è¿›å»çš„ï¼Œååˆ†æ¶å¿ƒï¼Œæ²¡æœ‰å…³é—­æŒ‰é’®ã€‚</p><p>éšç€äº’è”ç½‘çš„å¿«é€Ÿå‘å±•ï¼Œæˆ‘ä»¬å‡ ä¹ç¦»ä¸å¼€ç½‘ç»œäº†ï¼ŒèŠå¤©ã€é¢„è®¢é…’åº—ã€è´­ç‰©ç­‰ç­‰ï¼Œæˆ‘ä»¬çš„éšç§æ— æ—¶æ— åˆ»ä¸æš´éœ²åœ¨è¿™åºå¤§çš„ç½‘ç»œä¹‹ä¸­ï¼ŒHTTPS èƒ½å¤Ÿè®©ä¿¡æ¯åœ¨ç½‘ç»œä¸­çš„ä¼ é€’æ›´åŠ å®‰å…¨ï¼Œå¢åŠ äº† haker çš„æ”»å‡»æˆæœ¬ã€‚</p><p>HTTPS åŒºåˆ«äº HTTPï¼Œå®ƒå¤šäº†åŠ å¯†(encryption)ï¼Œè®¤è¯(verification)ï¼Œé‰´å®š(identification)ã€‚å®ƒçš„å®‰å…¨æºè‡ªéå¯¹ç§°åŠ å¯†ä»¥åŠç¬¬ä¸‰æ–¹çš„ CA è®¤è¯ã€‚</p><h3 id="ç®€è¿°-HTTPS-çš„è¿ä½œ"><a href="#ç®€è¿°-HTTPS-çš„è¿ä½œ" class="headerlink" title="ç®€è¿° HTTPS çš„è¿ä½œ"></a>ç®€è¿° HTTPS çš„è¿ä½œ</h3><p><a  target="_blank" href="http://image.beekka.com/blog/2014/bg2014092003.png"><img src="https://raw.githubusercontent.com/barretlee/blog/gh-pages/blogimgs/2015/10/05/20151001_b347f684.jpg" alt="HTTPSäº¤äº’"></a></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç®€è¿°å¦‚ä¸‹ï¼š</p><ul><li>å®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ªéšæœºæ•° <code>random-client</code>ï¼Œä¼ åˆ°æœåŠ¡å™¨ç«¯ï¼ˆSay Hello)</li><li>æœåŠ¡å™¨ç«¯ç”Ÿæˆä¸€ä¸ªéšæœºæ•° <code>random-server</code>ï¼Œå’Œç€å…¬é’¥ï¼Œä¸€èµ·å›é¦ˆç»™å®¢æˆ·ç«¯ï¼ˆI got it)</li><li>å®¢æˆ·ç«¯æ”¶åˆ°çš„ä¸œè¥¿åŸå°ä¸åŠ¨ï¼ŒåŠ ä¸Š <code>premaster secret</code>ï¼ˆé€šè¿‡ <code>random-client</code>ã€<code>random-server</code> ç»è¿‡ä¸€å®šç®—æ³•ç”Ÿæˆçš„ä¸œè¥¿ï¼‰ï¼Œå†ä¸€æ¬¡é€ç»™æœåŠ¡å™¨ç«¯ï¼Œè¿™æ¬¡ä¼ è¿‡å»çš„ä¸œè¥¿ä¼šä½¿ç”¨å…¬é’¥åŠ å¯†</li><li>æœåŠ¡å™¨ç«¯å…ˆä½¿ç”¨ç§é’¥è§£å¯†ï¼Œæ‹¿åˆ° <code>premaster secret</code>ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½æ‹¥æœ‰äº†ä¸‰ä¸ªè¦ç´ ï¼š<code>random-client</code>ã€<code>random-server</code> å’Œ <code>premaster secret</code></li><li>æ­¤æ—¶å®‰å…¨é€šé“å·²ç»å»ºç«‹ï¼Œä»¥åçš„äº¤æµéƒ½ä¼šæ ¡æ£€ä¸Šé¢çš„ä¸‰ä¸ªè¦ç´ é€šè¿‡ç®—æ³•ç®—å‡ºçš„ <code>session key</code></li></ul><h3 id="CA-æ•°å­—è¯ä¹¦è®¤è¯ä¸­å¿ƒ"><a href="#CA-æ•°å­—è¯ä¹¦è®¤è¯ä¸­å¿ƒ" class="headerlink" title="CA æ•°å­—è¯ä¹¦è®¤è¯ä¸­å¿ƒ"></a>CA æ•°å­—è¯ä¹¦è®¤è¯ä¸­å¿ƒ</h3><p>å¦‚æœç½‘ç«™åªé ä¸Šå›¾è¿ä½œï¼Œå¯èƒ½ä¼šè¢«ä¸­é—´äººæ”»å‡»ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¸­é—´æœ‰ä¸€ä¸ªä¸­é—´äººï¼Œä¸¤è€…ä¹‹é—´çš„ä¼ è¾“å¯¹ä¸­é—´äººæ¥è¯´æ˜¯é€æ˜çš„ï¼Œé‚£ä¹ˆä¸­é—´äººå®Œå…¨å¯ä»¥è·å–ä¸¤ç«¯ä¹‹é—´çš„ä»»ä½•æ•°æ®ï¼Œç„¶åå°†æ•°æ®åŸå°ä¸åŠ¨çš„è½¬å‘ç»™ä¸¤ç«¯ï¼Œç”±äºä¸­é—´äººä¹Ÿæ‹¿åˆ°äº†ä¸‰è¦ç´ å’Œå…¬é’¥ï¼Œå®ƒç…§æ ·å¯ä»¥è§£å¯†ä¼ è¾“å†…å®¹ï¼Œå¹¶ä¸”è¿˜å¯ä»¥ç¯¡æ”¹å†…å®¹ã€‚</p><p>ä¸ºäº†ç¡®ä¿æˆ‘ä»¬çš„æ•°æ®å®‰å…¨ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ª CA æ•°å­—è¯ä¹¦ã€‚HTTPSçš„ä¼ è¾“é‡‡ç”¨çš„æ˜¯éå¯¹ç§°åŠ å¯†ï¼Œä¸€ç»„éå¯¹ç§°åŠ å¯†å¯†é’¥åŒ…å«å…¬é’¥å’Œç§é’¥ï¼Œé€šè¿‡å…¬é’¥åŠ å¯†çš„å†…å®¹åªæœ‰ç§é’¥èƒ½å¤Ÿè§£å¯†ã€‚ä¸Šé¢æˆ‘ä»¬çœ‹åˆ°ï¼Œæ•´ä¸ªä¼ è¾“è¿‡ç¨‹ï¼ŒæœåŠ¡å™¨ç«¯æ˜¯æ²¡æœ‰é€éœ²ç§é’¥çš„ã€‚è€Œ CA æ•°å­—è®¤è¯æ¶‰åŠåˆ°ç§é’¥ï¼Œæ•´ä¸ªè¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰å¾ˆæ·±å…¥çš„äº†è§£ï¼Œåç»­æœ‰è¯¦ç»†äº†è§£ä¹‹åå†è¡¥å……ä¸‹ã€‚</p><p>CA è®¤è¯åˆ†ä¸ºä¸‰ç±»ï¼šDV ( domain validation)ï¼ŒOV ( organization validation)ï¼ŒEV ( extended validation)ï¼Œè¯ä¹¦ç”³è¯·éš¾åº¦ä»å‰å¾€åé€’å¢ï¼Œè²Œä¼¼ EV è¿™ç§ä¸ä»…ä»…æ˜¯æœ‰é’±å°±å¯ä»¥ç”³è¯·çš„ã€‚</p><p>å¯¹äºä¸€èˆ¬çš„å°å‹ç½‘ç«™å°¤å…¶æ˜¯åšå®¢ï¼Œå¯ä»¥ä½¿ç”¨è‡ªç­¾åè¯ä¹¦æ¥æ„å»ºå®‰å…¨ç½‘ç»œï¼Œæ‰€è°“è‡ªç­¾åè¯ä¹¦ï¼Œå°±æ˜¯è‡ªå·±æ‰®æ¼” CA æœºæ„ï¼Œè‡ªå·±ç»™è‡ªå·±çš„æœåŠ¡å™¨é¢å‘è¯ä¹¦ã€‚</p><h3 id="ç”Ÿæˆå¯†é’¥ã€è¯ä¹¦"><a href="#ç”Ÿæˆå¯†é’¥ã€è¯ä¹¦" class="headerlink" title="ç”Ÿæˆå¯†é’¥ã€è¯ä¹¦"></a>ç”Ÿæˆå¯†é’¥ã€è¯ä¹¦</h3><p>ç¬¬ä¸€æ­¥ï¼Œä¸ºæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯å‡†å¤‡å…¬é’¥ã€ç§é’¥</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”ŸæˆæœåŠ¡å™¨ç«¯ç§é’¥</span></span><br><span class="line">openssl genrsa -out server.key 1024</span><br><span class="line"><span class="comment"># ç”ŸæˆæœåŠ¡å™¨ç«¯å…¬é’¥</span></span><br><span class="line">openssl rsa -<span class="keyword">in</span> server.key -pubout -out server.pem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆå®¢æˆ·ç«¯ç§é’¥</span></span><br><span class="line">openssl genrsa -out client.key 1024</span><br><span class="line"><span class="comment"># ç”Ÿæˆå®¢æˆ·ç«¯å…¬é’¥</span></span><br><span class="line">openssl rsa -<span class="keyword">in</span> client.key -pubout -out client.pem</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥ï¼Œç”Ÿæˆ CA è¯ä¹¦</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿæˆ CA ç§é’¥</span></span><br><span class="line">openssl genrsa -out ca.key 1024</span><br><span class="line"><span class="comment"># X.509 Certificate Signing Request (CSR) Management.</span></span><br><span class="line">openssl req -new -key ca.key -out ca.csr</span><br><span class="line"><span class="comment"># X.509 Certificate Data Management.</span></span><br><span class="line">openssl x509 -req -<span class="keyword">in</span> ca.csr -signkey ca.key -out ca.crt</span><br></pre></td></tr></table></figure><p>åœ¨æ‰§è¡Œç¬¬äºŒæ­¥æ—¶ä¼šå‡ºç°ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ  keys  openssl req -new -key ca.key -out ca.csr</span><br><span class="line">You are about to be asked to enter information that will be incorporated</span><br><span class="line">into your certificate request.</span><br><span class="line">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class="line">There are quite a few fields but you can leave some blank</span><br><span class="line">For some fields there will be a default value,</span><br><span class="line">If you enter <span class="string">&#x27;.&#x27;</span>, the field will be left blank.</span><br><span class="line">-----</span><br><span class="line">Country Name (2 letter code) [AU]:CN</span><br><span class="line">State or Province Name (full name) [Some-State]:Zhejiang</span><br><span class="line">Locality Name (eg, city) []:Hangzhou</span><br><span class="line">Organization Name (eg, company) [Internet Widgits Pty Ltd]:My CA</span><br><span class="line">Organizational Unit Name (eg, section) []:</span><br><span class="line">Common Name (e.g. server FQDN or YOUR name) []:localhost</span><br><span class="line">Email Address []:</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œè¿™é‡Œçš„ <code>Organization Name (eg, company) [Internet Widgits Pty Ltd]:</code> åé¢ç”Ÿæˆå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯è¯ä¹¦çš„æ—¶å€™ä¹Ÿéœ€è¦å¡«å†™ï¼Œä¸è¦å†™æˆä¸€æ ·çš„ï¼ï¼ï¼å¯ä»¥éšæ„å†™å¦‚ï¼šMy CA, My Server, My Clientã€‚</p><p>ç„¶å <code>Common Name (e.g. server FQDN or YOUR name) []:</code> è¿™ä¸€é¡¹ï¼Œæ˜¯æœ€åå¯ä»¥è®¿é—®çš„åŸŸåï¼Œæˆ‘è¿™é‡Œä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œå†™æˆ <code>localhost</code>ï¼Œå¦‚æœæ˜¯ä¸ºäº†ç»™æˆ‘çš„ç½‘ç«™ç”Ÿæˆè¯ä¹¦ï¼Œéœ€è¦å†™æˆ <code>barretlee.com</code>ã€‚</p><p>ç¬¬ä¸‰æ­¥ï¼Œç”ŸæˆæœåŠ¡å™¨ç«¯è¯ä¹¦å’Œå®¢æˆ·ç«¯è¯ä¹¦</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æœåŠ¡å™¨ç«¯éœ€è¦å‘ CA æœºæ„ç”³è¯·ç­¾åè¯ä¹¦ï¼Œåœ¨ç”³è¯·ç­¾åè¯ä¹¦ä¹‹å‰ä¾ç„¶æ˜¯åˆ›å»ºè‡ªå·±çš„ CSR æ–‡ä»¶</span></span><br><span class="line">openssl req -new -key server.key -out server.csr</span><br><span class="line"><span class="comment"># å‘è‡ªå·±çš„ CA æœºæ„ç”³è¯·è¯ä¹¦ï¼Œç­¾åè¿‡ç¨‹éœ€è¦ CA çš„è¯ä¹¦å’Œç§é’¥å‚ä¸ï¼Œæœ€ç»ˆé¢å‘ä¸€ä¸ªå¸¦æœ‰ CA ç­¾åçš„è¯ä¹¦</span></span><br><span class="line">openssl x509 -req -CA ca.crt -CAkey ca.key -CAcreateserial -<span class="keyword">in</span> server.csr -out server.crt</span><br><span class="line"></span><br><span class="line"><span class="comment"># client ç«¯</span></span><br><span class="line">openssl req -new -key client.key -out client.csr</span><br><span class="line"><span class="comment"># client ç«¯åˆ° CA ç­¾å</span></span><br><span class="line">openssl x509 -req -CA ca.crt -CAkey ca.key -CAcreateserial -<span class="keyword">in</span> client.csr -out client.crt</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬çš„ keys æ–‡ä»¶å¤¹ä¸‹å·²ç»æœ‰å¦‚ä¸‹å†…å®¹äº†ï¼š</p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ https-client<span class="selector-class">.js</span></span><br><span class="line">â”œâ”€â”€ https-server<span class="selector-class">.js</span></span><br><span class="line">â””â”€â”€ keys</span><br><span class="line">    â”œâ”€â”€ ca<span class="selector-class">.crt</span></span><br><span class="line">    â”œâ”€â”€ ca<span class="selector-class">.csr</span></span><br><span class="line">    â”œâ”€â”€ ca<span class="selector-class">.key</span></span><br><span class="line">    â”œâ”€â”€ ca<span class="selector-class">.pem</span></span><br><span class="line">    â”œâ”€â”€ ca<span class="selector-class">.srl</span></span><br><span class="line">    â”œâ”€â”€ client<span class="selector-class">.crt</span></span><br><span class="line">    â”œâ”€â”€ client<span class="selector-class">.csr</span></span><br><span class="line">    â”œâ”€â”€ client<span class="selector-class">.key</span></span><br><span class="line">    â”œâ”€â”€ client<span class="selector-class">.pem</span></span><br><span class="line">    â”œâ”€â”€ server<span class="selector-class">.crt</span></span><br><span class="line">    â”œâ”€â”€ server<span class="selector-class">.csr</span></span><br><span class="line">    â”œâ”€â”€ server<span class="selector-class">.key</span></span><br><span class="line">    â””â”€â”€ server.pem</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°ä¸Šé¢ä¸¤ä¸ª js æ–‡ä»¶äº†ä¹ˆï¼Œæˆ‘ä»¬æ¥è·‘å‡ ä¸ªdemoã€‚</p><h3 id="HTTPSæœ¬åœ°æµ‹è¯•"><a href="#HTTPSæœ¬åœ°æµ‹è¯•" class="headerlink" title="HTTPSæœ¬åœ°æµ‹è¯•"></a>HTTPSæœ¬åœ°æµ‹è¯•</h3><p>æœåŠ¡å™¨ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// file http-server.js</span></span><br><span class="line"><span class="keyword">var</span> https = <span class="built_in">require</span>(<span class="string">&#x27;https&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">  <span class="attr">key</span>: fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./keys/server.key&#x27;</span>),</span><br><span class="line">  <span class="attr">cert</span>: fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./keys/server.crt&#x27;</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">https.<span class="title function_">createServer</span>(options, <span class="keyword">function</span>(<span class="params">req, res</span>) &#123;</span><br><span class="line">  res.<span class="title function_">writeHead</span>(<span class="number">200</span>);</span><br><span class="line">  res.<span class="title function_">end</span>(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">8000</span>);</span><br></pre></td></tr></table></figure><p>çŸ­çŸ­å‡ è¡Œä»£ç å°±æ„å»ºäº†ä¸€ä¸ªç®€å•çš„ https æœåŠ¡å™¨ï¼Œoptions å°†ç§é’¥å’Œè¯ä¹¦å¸¦ä¸Šã€‚ç„¶ååˆ©ç”¨ curl æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ  https  curl //localhost:8000</span><br><span class="line">curl: (60) SSL certificate problem: Invalid certificate chain</span><br><span class="line">More details here: http://curl.haxx.se/docs/sslcerts.html</span><br><span class="line"></span><br><span class="line">curl performs SSL certificate verification by default, using a <span class="string">&quot;bundle&quot;</span></span><br><span class="line"> of Certificate Authority (CA) public keys (CA certs). If the default</span><br><span class="line"> bundle file isn<span class="string">&#x27;t adequate, you can specify an alternate file</span></span><br><span class="line"><span class="string"> using the --cacert option.</span></span><br><span class="line"><span class="string">If this HTTPS server uses a certificate signed by a CA represented in</span></span><br><span class="line"><span class="string"> the bundle, the certificate verification probably failed due to a</span></span><br><span class="line"><span class="string"> problem with the certificate (it might be expired, or the name might</span></span><br><span class="line"><span class="string"> not match the domain name in the URL).</span></span><br><span class="line"><span class="string">If you&#x27;</span>d like to turn off curl<span class="string">&#x27;s verification of the certificate, use</span></span><br><span class="line"><span class="string"> the -k (or --insecure) option.</span></span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬ç›´æ¥è®¿é—®æ—¶ï¼Œ<code>curl //localhost:8000</code> ä¸€å †æç¤ºï¼ŒåŸå› æ˜¯æ²¡æœ‰ç»è¿‡ CA è®¤è¯ï¼Œæ·»åŠ  <code>-k</code> å‚æ•°èƒ½å¤Ÿè§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ  https  curl -k //localhost:8000</span><br><span class="line">hello world%</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„æ–¹å¼æ˜¯ä¸å®‰å…¨çš„ï¼Œå­˜åœ¨æˆ‘ä»¬ä¸Šé¢æåˆ°çš„ä¸­é—´äººæ”»å‡»é—®é¢˜ã€‚å¯ä»¥æä¸€ä¸ªå®¢æˆ·ç«¯å¸¦ä¸Š CA è¯ä¹¦è¯•è¯•ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// file http-client.js</span></span><br><span class="line"><span class="keyword">var</span> https = <span class="built_in">require</span>(<span class="string">&#x27;https&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">  <span class="attr">hostname</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">  <span class="attr">port</span>: <span class="number">8000</span>,</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">  <span class="attr">methed</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">  <span class="attr">key</span>: fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./keys/client.key&#x27;</span>),</span><br><span class="line">  <span class="attr">cert</span>: fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./keys/client.crt&#x27;</span>),</span><br><span class="line">  <span class="attr">ca</span>: [fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./keys/ca.crt&#x27;</span>)]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">options.<span class="property">agent</span> = <span class="keyword">new</span> https.<span class="title class_">Agent</span>(options);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> req = https.<span class="title function_">request</span>(options, <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">  res.<span class="title function_">setEncoding</span>(<span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line">  res.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="keyword">function</span>(<span class="params">d</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(d);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">req.<span class="title function_">end</span>();</span><br><span class="line"></span><br><span class="line">req.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å…ˆæ‰“å¼€æœåŠ¡å™¨ <code>node http-server.js</code>ï¼Œç„¶åæ‰§è¡Œ</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">âœ  https  node https-client.<span class="property">js</span></span><br><span class="line">hello world</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ çš„ä»£ç æ²¡æœ‰è¾“å‡º <code>hello world</code>ï¼Œè¯´æ˜è¯ä¹¦ç”Ÿæˆçš„æ—¶å€™å­˜åœ¨é—®é¢˜ã€‚ä¹Ÿå¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®ï¼š</p><p><img src="https://raw.githubusercontent.com/barretlee/blog/gh-pages/blogimgs/2015/10/05/20151001_9bf819eb.jpg" alt="httpsè¯ä¹¦é—®é¢˜"></p><p>æç¤ºé”™è¯¯ï¼š</p><blockquote><p>æ­¤æœåŠ¡å™¨æ— æ³•è¯æ˜å®ƒæ˜¯localhostï¼›æ‚¨è®¡ç®—æœºçš„æ“ä½œç³»ç»Ÿä¸ä¿¡ä»»å…¶å®‰å…¨è¯ä¹¦ã€‚å‡ºç°æ­¤é—®é¢˜çš„åŸå› å¯èƒ½æ˜¯é…ç½®æœ‰è¯¯æˆ–æ‚¨çš„è¿æ¥è¢«æ‹¦æˆªäº†ã€‚</p></blockquote><p>åŸå› æ˜¯æµè§ˆå™¨æ²¡æœ‰ CA è¯ä¹¦ï¼Œåªæœ‰ CA è¯ä¹¦ï¼ŒæœåŠ¡å™¨æ‰èƒ½å¤Ÿç¡®å®šï¼Œè¿™ä¸ªç”¨æˆ·å°±æ˜¯çœŸå®çš„æ¥è‡ª localhost çš„è®¿é—®è¯·æ±‚ï¼ˆæ¯”å¦‚ä¸æ˜¯ä»£ç†è¿‡æ¥çš„ï¼‰ã€‚</p><p>ä½ å¯ä»¥ç‚¹å‡» <code>ç»§ç»­å‰å¾€localhostï¼ˆä¸å®‰å…¨ï¼‰</code> è¿™ä¸ªé“¾æ¥ï¼Œç›¸å½“äºæ‰§è¡Œ <code>curl -k //localhost:8000</code>ã€‚å¦‚æœæˆ‘ä»¬çš„è¯ä¹¦ä¸æ˜¯è‡ªå·±é¢å‘ï¼Œè€Œæ˜¯å»é è°±çš„æœºæ„å»ç”³è¯·çš„ï¼Œé‚£å°±ä¸ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼Œå› ä¸ºé è°±æœºæ„çš„è¯ä¹¦ä¼šæ”¾åˆ°æµè§ˆå™¨ä¸­ï¼Œæµè§ˆå™¨ä¼šå¸®æˆ‘ä»¬åšå¾ˆå¤šäº‹æƒ…ã€‚åˆæ¬¡å°è¯•çš„åŒå­¦å¯ä»¥å» <a href="//startssl.com">startssl.com</a> ç”³è¯·ä¸€ä¸ªå…è´¹çš„è¯ä¹¦ã€‚</p><h3 id="Nginx-éƒ¨ç½²"><a href="#Nginx-éƒ¨ç½²" class="headerlink" title="Nginx éƒ¨ç½²"></a>Nginx éƒ¨ç½²</h3><p>ssh åˆ°ä½ çš„æœåŠ¡å™¨ï¼Œå¯¹ Nginx åšå¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">server_names</span> barretlee.com <span class="regexp">*.barretlee.com</span></span><br><span class="line">ssl <span class="literal">on</span>;</span><br><span class="line"><span class="attribute">ssl_certificate</span> /etc/nginx/ssl/barretlee.com.crt;</span><br><span class="line"><span class="attribute">ssl_certificate_key</span> /etc/nginx/ssl/barretlee.com.key;</span><br><span class="line"><span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line"><span class="attribute">ssl_ciphers</span> <span class="string">&quot;EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4EECDH EDH+aRSA RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS !MEDIUM&quot;</span>;</span><br><span class="line"><span class="comment"># Add perfect forward secrecy</span></span><br><span class="line"><span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line"><span class="attribute">add_header</span> Strict-Transport-Security <span class="string">&quot;max-age=31536000; includeSubdomains&quot;</span>;</span><br></pre></td></tr></table></figure><p>ä¼šå‘ç°ï¼Œç½‘é¡µ URL åœ°å€æ¡†å·¦è¾¹å·²ç»å¤šå‡ºäº†ä¸€ä¸ªå°ç»¿é”ã€‚å½“ç„¶ï¼Œéƒ¨ç½²å¥½äº†ä¹‹åå¯ä»¥å»<a href="//www.ssllabs.com/ssltest/analyze.html">è¿™ä¸ªç½‘ç«™</a>çœ‹çœ‹æµ‹è¯„åˆ†æ•°ï¼Œå¦‚æœåˆ†æ•°æ˜¯ A+ï¼Œè¯´æ˜ä½ çš„ HTTPS çš„å„é¡¹é…ç½®éƒ½è¿˜ä¸é”™ï¼Œé€Ÿåº¦ä¹Ÿå¾ˆå¿«ã€‚</p><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>å¥½å§ï¼Œæˆ‘ä¹Ÿæ˜¯åˆæ¬¡å°è¯•ï¼Œæœ¬åœ°æµ‹è¯•æ˜¯ ok çš„ï¼Œç”±äºä¹°çš„é˜¿é‡Œäº‘æœåŠ¡å™¨åˆ°æœŸäº†ä¹Ÿæ²¡ç»­è´¹ï¼Œå°±æ²¡è¿œç¨‹æŠ˜è…¾ï¼Œå…¶å®æœ¬åœ° Nginx + Nodejsï¼Œç„¶å Hosts é…ç½®åŸŸåä¹Ÿæ˜¯å¯ä»¥è¾ƒå¥½æ¨¡æ‹Ÿçš„ã€‚æ–‡ä¸­å¾ˆå¤šåœ°æ–¹æè¿°çš„å¯èƒ½ä¸æ˜¯ååˆ†å‡†ç¡®ï¼Œæåˆ°çš„ç‚¹ä¹Ÿä¸å¤Ÿå…¨é¢ï¼Œå¦‚æœæœ‰é”™è¯¯ï¼Œè¿˜è¯·æ–§æ­£ï¼</p></div></div><div class="old-article-warning">æœ¬æ–‡åœ¨ <b>3575</b> å¤©ä¹‹å‰å‘è¡¨ï¼ŒæŠ€æœ¯æ›´æ›¿é£å¿«ï¼Œæ–‡ä¸­éƒ¨åˆ†å†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ï¼Œå¦‚æœ‰ç–‘é—®ï¼Œè¯·è”ç³»ä½œè€… <a href="/about">Barretæé–</a>ã€‚</div><div class="copyright" itemscope itemtype="http://schema.org/ProfilePage" tabindex="0" aria-hidden="true"><ul><li>ä½œè€…: <a href="/about/" itemprop="name">Barretæé–</a></li><li>æ–‡ç« åˆ†ç±»: <a class="category-link" href="/blog/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/">ç½‘ç»œå®‰å…¨</a></li><li>æ–‡ç« æ ‡ç­¾: <a class="article-tag-none-link" href="/blog/tags/HTTPS/" rel="tag">HTTPS</a></li><li>å‘è¡¨æ—¥æœŸ: 2015-10-05 15:29:39</li><li>æœ€åç¼–è¾‘æ—¶é—´: 2025-07-19 11:01:03</li><li>æœ¬æ–‡ Markdown åœ°å€: <a target="_
			" href="https://github.com/barretlee/blog/tree/master/blog/src/_posts/2015-10-05-how-to-build-a-https-server.md">HTTPSè¯ä¹¦ç”ŸæˆåŸç†å’Œéƒ¨ç½²ç»†èŠ‚</a></li><li>ç‰ˆæƒå£°æ˜ï¼š<a  target="_blank" href="https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">CC BY-NC-ND 3.0</a></li><li>Feed è®¢é˜…: <a href="/rss2.xml"><i class="icon">&#x25c8;</i></a><div style="opacity:.3;text-align:right;margin:5px -5px -10px 0;float:right;font-size:12px">ç¼–è¾‘æœ¬æ–‡ï¼š<a  target="_blank" href="https://github.com/barretlee/blog/edit/master/blog/src/_posts/2015-10-05-how-to-build-a-https-server.md" target="_blank" aria-hidden="true"><i class="icon">&#xe622;</i></a>ï¼› æ–°å»ºæ–‡ç« ï¼š<a  target="_blank" href="https://github.com/barretlee/blog/new/master/blog/src/_posts" target="_blank" aria-hidden="true"><i class="icon">&#xe616;</i></a></div></li></ul><a href="/about/"><img style="max-width:120px" src="https://img.alicdn.com/imgextra/i3/O1CN01tDYnfz23AWT1ag79p_!!6000000007215-2-tps-1200-1200.png"></a></div><em class="arrow-expend" tabindex="0" aria-hidden="0" aria-label="ç‚¹å‡»å±•å¼€ç½‘é¡µå¯¼èˆª" aria-selected="true" aria-lable="ç½‘é¡µå¯¼èˆª" aria-expanded="false" id="i1">â–¾<ul role="group" aria-labelledby="i1" aria-expanded="false"><li><a href="/entry/">åšå®¢</a></li><li><a href="/message/">ç•™è¨€</a></li><li><a href="/demo/">å®éªŒå®¤</a></li><li><a href="/friends/">å‹æƒ…é“¾æ¥</a></li></ul></em></div><div class="post-relative"><div class="page-relative"><a href="/blog/2015/10/07/debug-nodejs-in-command-line/" class="post-prev"><i class="icon" tabindex="0" aria-hidden="true">&#x261c;</i> <span class="aria-readonly">ä¸Šä¸€ç¯‡æ–‡ç« </span> <b>NodeJSçš„ä»£ç è°ƒè¯•å’Œæ€§èƒ½è°ƒä¼˜</b> </a><a href="/blog/2015/09/30/confusion-about-for-loop-var/" class="post-next"><span class="aria-readonly">ä¸‹ä¸€ç¯‡æ–‡ç« </span> <b>JavaScript å…³äº for å¾ªç¯ä¸­çš„ç–‘é—®</b> <i class="icon" tabindex="0" aria-hidden="true">&#xe602;</i></a></div><div class="page-relative-fixed" tabindex="0" aria-hidden="true"><a href="/blog/2015/10/07/debug-nodejs-in-command-line/" class="prev" title="NodeJSçš„ä»£ç è°ƒè¯•å’Œæ€§èƒ½è°ƒä¼˜"><i class="icon">&#xe600;</i> <b>NodeJSçš„ä»£ç è°ƒè¯•å’Œæ€§èƒ½è°ƒä¼˜</b> </a><a href="/blog/2015/09/30/confusion-about-for-loop-var/" class="next" title="JavaScript å…³äº for å¾ªç¯ä¸­çš„ç–‘é—®"><i class="icon">&#x261e;</i> <b>JavaScript å…³äº for å¾ªç¯ä¸­çš„ç–‘é—®</b></a></div></div></div><div class="sidebar" tabindex="0" aria-hidden="true"><div class="func-btns func-btns-up"><span class="func-item"><i class="func-nav icon">&#xe618;<span>ç›®å½•</span></i><div><i class="left-arrow"></i><i class="left-arrow-clone"></i> <a href="javascript:void(0);" onclick="return!1">æ˜¾ç¤ºç›®å½•</a></div></span><span class="func-item"><i class="func-font icon">&#xe604;<span>å¤œé—´</span></i><div class="font-choose-box"><i class="left-arrow"></i><i class="left-arrow-clone"></i><div class="font-choose bg-choose"><a href="javascript:void(0)" onclick="return!1" class="bg-type bg-type-sun font-type-song"><i class="icon">&#xe61a;</i></a> <a href="javascript:void(0)" onclick="return!1" class="bg-type bg-type-moon font-type-hei"><i class="icon">&#xe619;</i></a></div></div></span><span class="func-item"><i class="func-about icon">&#x263b;<span>å…³äº</span></i><div><i class="left-arrow"></i><i class="left-arrow-clone"></i><p><a href="/about/" class="func-about-link" target="_blank">å…³äºä½œè€…</a></p><div id="followMeOnWeibo"></div></div></span></div><div class="func-btns"><span class="func-item"><a href="/friends/" target="_blank"><i class="func-rss icon">&#xe601;<span>é“¾æ¥</span></i></a><div><i class="left-arrow"></i><i class="left-arrow-clone"></i> <a href="/friends/" target="_blank">å‹æƒ…é“¾æ¥</a></div></span><span class="func-item"><a href="/rss2.xml" target="_blank"><i class="func-rss icon">&#x25c8;<span>è®¢é˜…</span></i></a><div><i class="left-arrow"></i><i class="left-arrow-clone"></i><a href="/rss2.xml" target="_blank">è®¢é˜…æˆ‘å§ï¼</a></div></span></div></div><div class="single-page-footer"><div class="footer"><div class="footer-wraper"><div class="footer-content"><div class="footer-nav"><a href="javascript: void(0);" class="ds-thread-count disqus-comment-count" data-thread-key="how-to-build-a-https-server" data-disqus-identifier="how-to-build-a-https-server" tabindex="0" aria-hidden="true">è¯„è®ºå†…å®¹</a> <a href="javascript: void(0);" id="comments">ç›¸å…³æ–‡ç« </a> <a href="/friends/" tabindex="0" aria-hidden="true" style="display:none">å‹æƒ…é“¾æ¥</a></div><div class="nav-detail"><div tabindex="0"><div id="gitalk" sid="how-to-build-a-https-server"></div><script charset="utf-8" type="text/javascript" src="https://fastly.jsdelivr.net/gh/barretlee/blog@gh-pages/public/js/gitalk.js"></script><script type="text/javascript">var postContent=document.querySelectorAll(".post-content>p");postContent&&postContent.length&&(postContent=(postContent=postContent.item(0).textContent+(postContent.item(1)&&postContent.item(1).textContent||"")).length>140?postContent.slice(0,140)+"...":postContent);var gitalk=new Gitalk({clientID:"50a1b3aa7854b01a1c85",clientSecret:"226ac154f80a6aea0985da874126b35795f22eed",language:"zh-CN",perPage:100,createIssueManually:!1,repo:"blog",owner:"barretlee",admin:["barretlee"],id:"how-to-build-a-https-server",body:"åŸæ–‡åœ°å€ï¼š"+location.href+"\n\næ–‡æ‘˜ï¼š"+postContent,distractionFreeMode:!1});window.addEventListener("load",(function(){gitalk.render("gitalk")}));var commentTimer=setInterval(()=>{var t=document.querySelector(".gt-link-counts"),e=document.querySelector(".hash-to-comments");t&&e&&(e.textContent=t.textContent,clearInterval(commentTimer))},500);setTimeout(()=>{clearInterval(commentTimer)},6e4)</script></div><div style="display:block"><div class="relative-wrapper"><div class="relative-article"><ul><li><span><font aria-hidden="true">2016-08-25 Â»</font> </span><a href="/blog/2016/08/25/pac-file/">è¯¦è§£ä»£ç†è‡ªåŠ¨é…ç½® PAC</a> <span class="aria-readonly">å‘è¡¨æ—¶é—´ä¸º2016å¹´08æœˆ25æ—¥</span><div class="relative-box"><a href="/blog/2016/08/25/pac-file/" class="relative-img-wrapper"><img src="https://raw.githubusercontent.com/barretlee/blog/gh-pages/blogimgs/2016/08/25/6c0378f8gw1f75co9fseuj20p00dwwhk.jpg" style="width:100%" loading="lazy" data-original="/../blogimgs/2016/08/25/6c0378f8gw1f75co9fseuj20p00dwwhk.jpg"></a><span class="aria-readonly">æ–‡ç« æ¦‚è¦ </span>æœ€è¿‘ä¸€ç›´åœ¨åšè·¨åŸŸä¸­åå±€åŸŸç½‘çš„å·¥ä½œï¼Œäº†è§£äº†å¾ˆå¤šä»£ç†çŸ¥è¯†å’ŒåŸºç¡€æ¦‚å¿µï¼Œå¾ˆé›¶æ•£ï¼Œä¹Ÿå¾ˆç»†ç¢ã€‚å¸Œæœ›é€šè¿‡ä¸€æ®µæ—¶é—´çš„å­¦ä¹ ï¼Œèƒ½å¤Ÿè‡ªç”±åœ°ç©¿æ¢­åœ¨å›½é™…äº’è”ç½‘å’Œä¸­åå±€åŸŸç½‘ä¹‹é—´ã€‚åç»­ä¼šå†™ä¸€ç³»åˆ—æ–‡ç« è®°å½•æˆ‘äº†è§£åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œæœ¬æ–‡è¦è¯´çš„æ˜¯æˆ‘ä»¬å¹³æ—¶æ¥è§¦æ¯”è¾ƒå¤šçš„ PACï¼Œå…¨åä¸º proxy auto-configã€‚--></div></li><li><span><font aria-hidden="true">2016-04-24 Â»</font> </span><a href="/blog/2016/04/24/detail-about-ca-and-certs/">ç»†è¯´ CA å’Œè¯ä¹¦</a> <span class="aria-readonly">å‘è¡¨æ—¶é—´ä¸º2016å¹´04æœˆ24æ—¥</span><div class="relative-box"><a href="/blog/2016/04/24/detail-about-ca-and-certs/" class="relative-img-wrapper"><img src="https://raw.githubusercontent.com/barretlee/blog/gh-pages/blogimgs/2016/04/24/6c0378f8gw1f36o0231kaj20fh0dd0ti.jpg" style="width:100%" loading="lazy" data-original="/../blogimgs/2016/04/24/6c0378f8gw1f36o0231kaj20fh0dd0ti.jpg"></a><span class="aria-readonly">æ–‡ç« æ¦‚è¦ </span>CAï¼ŒCatificate Authorityï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æä¾›è¯ä¹¦ï¼ˆå³æœåŠ¡å™¨è¯ä¹¦ï¼Œç”±åŸŸåã€å…¬å¸ä¿¡æ¯ã€åºåˆ—å·å’Œç­¾åä¿¡æ¯ç»„æˆï¼‰åŠ å¼ºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´ä¿¡æ¯äº¤äº’çš„å®‰å…¨æ€§ï¼Œä»¥åŠè¯ä¹¦è¿ç»´ç›¸å…³æœåŠ¡ã€‚ä»»ä½•ä¸ªä½“&#x2F;ç»„ç»‡éƒ½å¯ä»¥æ‰®æ¼” CA çš„è§’è‰²ï¼Œåªä¸è¿‡éš¾ä»¥å¾—åˆ°å®¢æˆ·ç«¯çš„ä¿¡ä»»ï¼Œèƒ½å¤Ÿå—æµè§ˆå™¨é»˜è®¤ä¿¡ä»»çš„ CA å¤§å‚å•†æœ‰å¾ˆå¤šï¼Œå…¶ä¸­ TOP5 æ˜¯ Symantecã€Comodoã€Godaddyã€GolbalSign å’Œ Digicertã€‚</div></li><li><span><font aria-hidden="true">2016-04-06 Â»</font> </span><a href="/blog/2016/04/06/operation-not-permitted-problem-in-linux-or-unix-system/">Unix/Linux ç³»ç»Ÿä¸­çš„ Operation Not Permitted é—®é¢˜</a> <span class="aria-readonly">å‘è¡¨æ—¶é—´ä¸º2016å¹´04æœˆ06æ—¥</span><div class="relative-box"><span class="aria-readonly">æ–‡ç« æ¦‚è¦ </span>å¤šæ¬¡åœ¨ Mac ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ° Operation Not Permitted é—®é¢˜ï¼Œä¹‹å‰éƒ½æ˜¯ç•¥è¿‡ï¼Œä»Šå¤©å¥½å¥½æ‘¸ç´¢äº†ä¸€æŠŠï¼Œææ˜ç™½äº†é“ç†ï¼Œè®°å½•ä¸‹æ¥ã€‚</div></li><li><span><font aria-hidden="true">2016-02-23 Â»</font> </span><a href="/blog/2016/02/23/wifi-key/">WiFi ä¸‡èƒ½é’¥åŒ™åŸç†å’Œå±å®³æ¢ç©¶</a> <span class="aria-readonly">å‘è¡¨æ—¶é—´ä¸º2016å¹´02æœˆ23æ—¥</span><div class="relative-box"><span class="aria-readonly">æ–‡ç« æ¦‚è¦ </span>æœ¬æ–‡ä¸ä¼šä»ä»£ç è§’åº¦åˆ†æ WiFi ä¸‡èƒ½é’¥åŒ™è¿™ä¸ªè½¯ä»¶æ˜¯å¦‚ä½•ã€Œç ´è§£ã€å¯†ç çš„ï¼Œä¸»è¦ä»ä½¿ç”¨è¿™ä¸ªè½¯ä»¶åçš„æ„Ÿå—å‡ºå‘ï¼Œåˆ†æå®ƒå¯èƒ½ä¼šç”¨åˆ°çš„æ‰‹æ®µä»¥åŠå¯èƒ½å­˜åœ¨çš„é£é™©ã€‚</div></li></ul></div></div><div class="relative-to-comment" tabindex="0" aria-hidden="true"><span>ç•™ä¸‹è¯„è®º</span></div></div><div class="friends-box"><ul><li><a  target="_blank" href="http://hustskyking.cnblogs.com" target="_blank">æ—§åšå®¢</a> <font aria-hidden="true">Â»</font> <span>æˆ‘çš„æ—§åšå®¢ï¼ˆåšå®¢å›­è£èª‰åšå®¢ï¼‰</span></li><li><a  target="_blank" href="http://www.zhangmengxue.com" target="_blank">å¤§é¢</a> <font aria-hidden="true">Â»</font> <span>å¤§é¢å¤§é¢å“¼æ­Œç­‰æ—¥è½</span></li><li><a  target="_blank" href="http://www.zhangxinxu.com" target="_blank">å¼ é‘«æ—­</a> <font aria-hidden="true">Â»</font> <span>åŸæ¥å¤§å­¦æˆ‘ä¿©ä¸€ä¸ªå›¢é˜Ÿçš„~</span></li><li><a  target="_blank" href="http://web-tinker.com" target="_blank">æ¬¡ç¢³é…¸é’´</a> <font aria-hidden="true">Â»</font> <span>æ·±åº¦äº¤æµçš„ä¸€ä¸ªå¥½æœ‹å‹</span></li><li><a  target="_blank" href="http://imququ.com" target="_blank">å±ˆå±ˆ</a> <font aria-hidden="true">Â»</font> <span>è›è›åŒå­¦</span></li><li><a  target="_blank" href="http://www.ruanyifeng.com" target="_blank">é˜®ä¸€å³°</a> <font aria-hidden="true">Â»</font> <span>é˜®è€å¸ˆ</span></li><li><a href="/friends/">æ›´å¤šåˆ—è¡¨ <font aria-hidden="true">Â»</font></a></li></ul></div></div><div class="website-info" aria-hidden="true"><a class="page_editor" href="/admin/#/posts/cmd9nvpe300kvqk9b1ni1fb61" target="_blank">ğŸ™ˆ</a> <span>&copy;2013-2025 <small><a  target="_blank" href="https://www.miit.gov.cn/" about="_blank">æ¹˜ICPå¤‡14007107å·-1</a></small></span> æœ¬ç«™ç”± <a href="/">Barretæé–</a> çº¯æ‰‹å·¥æ‰“é€  | <a href="/about#contact">è”ç³»æ–¹å¼</a> <a  target="_blank" href="https://union.zhaodao.ai/#random" title="éšæœºè·³è½¬åˆ°ä¸€ä¸ªæœ‰æ„æ€çš„ç½‘ç«™" target="_blank" class="zhidao_ai"><img src="https://img.alicdn.com/imgextra/i2/O1CN01VjiZUL1r0eXge4taM_!!6000000005569-55-tps-300-300.svg" width="20" height="20"></a></div></div></div></div></div><div class="tools-wrapper" tabindex="0" aria-hidden="true"><a class="gotop icon" href="#" title="å›åˆ°é¡¶éƒ¨">&#x2191;</a><a class="hash-to-comments icon" title="æˆ‘è¦è¯„è®º">&#x2121;</a></div><div class="fixerr" tabindex="0" aria-hidden="true">çº é”™æ¨¡å¼</div></body><script src="https://fastly.jsdelivr.net/gh/barretlee/blog@gh-pages/public/js/jquery.js"></script><script src="https://fastly.jsdelivr.net/gh/barretlee/blog@gh-pages/public/js/main.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-67248043-3"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-67248043-3")</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?3524fff9629f2c80f8ea5daa13e67003";var t=document.getElementsByTagName("script")[0];t.async=!0,t.parentNode.insertBefore(e,t)}()</script><script>window.onerror=function(o){window.console&&window.console.log&&window.console.log(o);try{$("#loadLayer").remove()}catch(o){}return!0}</script></html>