<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><title>群晖 NAS 折腾小记 | 小胡子哥的个人网站</title><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,height=device-height,initial-scale=1,user-scalable=0"><meta name="author" content="https://plus.google.com/112634278852964994392?hl=zh-cn"><meta name="email" content="barret.china@gmail.com"><meta name="description" content="200G 的 iCloud 的储存（21 元/月）已经不够用了，只能升级到 2T（68 元/月），5 年下来价格是 4080 元，也就是 2 块 2T SSD 的价格，想想还不如在家搭建一个 NAS，但是呢，便捷性又不够，还得自己各种折腾，考虑网络、稳定性和数据安全等各种问题。这是一条来自 2..."><meta property="og:type" content="article"><meta property="og:title" content="群晖 NAS 折腾小记 | 小胡子哥的个人网站"><meta property="og:url" content="https://www.barretlee.com/blog/2021/06/22/rvls1e/"><meta property="og:site_name" content="群晖 NAS 折腾小记"><meta property="og:description" content="200G 的 iCloud 的储存（21 元/月）已经不够用了，只能升级到 2T（68 元/月），5 年下来价格是 4080 元，也就是 2 块 2T SSD 的价格，想想还不如在家搭建一个 NAS，但是呢，便捷性又不够，还得自己各种折腾，考虑网络、稳定性和数据安全等各种问题。这是一条来自 2..."><meta name="generator" content="https://hexo.io"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><link href="https://img.alicdn.com/imgextra/i4/O1CN01LKRotr20M1ZGJkT3v_!!6000000006834-2-tps-1200-1200.png" rel="apple-touch-icon-precomposed"><link rel="shoticon" href="https://img.alicdn.com/imgextra/i3/O1CN01EVx62B1eyZLyJsJnY_!!6000000003940-2-tps-100-100.png" type="image/x-icon"><link rel="alternate" type="application/rss+xml" href="https://www.barretlee.com/rss2.xml" title="小胡子哥的个人网站"><link rel="prev" href="https://www.barretlee.com/blog/2021/07/07/kc4bfb/" title="技术《Kubernetes 权威指南》"><link rel="next" href="https://www.barretlee.com/blog/2021/06/22/gqg6fm/" title="趣味《人类简史》"><link rel="start" href="https://www.barretlee.com/entry/" title="Blog Entry"><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/barretlee/blog@gh-pages/public/css/style-20230627-2.css"></head><body><div class="rainbow"></div><div class="container"><span class="local-search local-search-google local-search-plugin" style="display:none"><input type="search" placeholder="站内搜索" id="local-search-input" class="local-search-input-cls"> <i class="icon" aria-hidden="true" title="点击进入 Google 搜索">&#x2708;</i><div id="local-search-result" class="local-search-result-cls"></div></span><div class="article" itemscope itemtype="http://schema.org/Article"><div class="post"><div class="bread"><a href="/">小胡子哥的个人网站</a> » <a href="/entry/">博客</a> » <a class="category-link" href="/blog/categories/%E8%A7%82%E7%82%B9%E5%92%8C%E6%84%9F%E6%83%B3/">观点和感想</a></div><div class="post-title-wrapper"><h1 class="post-title" itemprop="name">群晖 NAS 折腾小记</h1><a href="/about/"><img style="max-width:120px" src="https://img.alicdn.com/imgextra/i1/O1CN01zmj6R326ehPa0NZO2_!!6000000007687-2-tps-1200-1200.png" alt="Barret李靖"></a></div><div class="post-info"><span>作者: <a href="/about/">Barret李靖</a></span> <span><time itemprop="timeCreated" aria-hidden="true">2021-06-22 12:13:48</time> <span class="aria-readonly">本文发布时间为2021年06月22日12时13分48秒</span> </span><span>分类: <a class="category-link" href="/blog/categories/%E8%A7%82%E7%82%B9%E5%92%8C%E6%84%9F%E6%83%B3/">观点和感想</a> </span><span tabindex="0" aria-hidden="true">标签: <a class="article-tag-none-link" href="/blog/tags/%E5%B0%8F%E8%83%A1%E5%AD%90%E5%93%A5%E7%9A%84%E6%80%9D%E6%BA%90%E5%9C%B0/" rel="tag">小胡子哥的思源地</a> </span><span class="aria-readonly">下面是正文内容</span> <span tabindex="0" aria-hidden="true">评论数: <a href="#comments" class="ds-thread-count hash-to-comments disqus-comment-count" data-thread-key="rvls1e" data-disqus-identifier="rvls1e"></a></span></div><div class="post-content" itemprop="articleBody"><p>200G 的 iCloud 的储存（21 元&#x2F;月）已经不够用了，只能升级到 2T（68 元&#x2F;月），5 年下来价格是 4080 元，也就是 2 块 2T SSD 的价格，想想还不如在家搭建一个 NAS，但是呢，便捷性又不够，还得自己各种折腾，考虑网络、稳定性和数据安全等各种问题。</p><p>这是一条来自 2020.09.26 的<a  target="_blank" href="https://weibo.com/1812166904/JmsZ4kPAq">微博</a>，由于家里长期一台配置还比较高的闲置 Mac Pro 挂机，在要不要再搞一台 NAS 这件事情上犹豫了很久，最后决定还是趁着国庆假期折腾一番：</p><p>十一假期准备折腾下 NAS，看了一些文章，还是有几个问题想问问有经验的朋友，我的需求大概是这样的：</p><ol><li>需要跑 1～3 个虚拟机，Windows 系统和 Linux 系统，预计最低 16G 以上内存才能满足需求</li><li>所有的服务都会通过 Docker 镜像提供，CPU 要强一点，有计算类服务</li><li>硬盘要求大概是 6T，数据双备份，也就是 18T 要求</li><li>支持千兆网络，最好是多网卡</li></ol><p>估摸着需要一个可拓展内存位、CPU 较强、盘位多的 NAS，有推荐的选项么，能耗如何？耐久性如何？噪声如何？相比直接一台 MBP（家有闲置） 通过 USB 连大硬盘最大的差异是啥？</p><h2 id="选购产品"><a href="#选购产品" class="headerlink" title="选购产品"></a>选购产品</h2><p>NAS 的全称是 Network attached Storage，网络附属储存，它被创造出来就是为了解决数据储存问题的，围绕数据储存从速度、安全性、性能和能耗等各个方面优化产品，并且针对不同用户场景提供了超级丰富的个性化配置，所以你搜一个群晖，能看到一大堆的型号，玲琅满目。</p><p>几乎 90% 的人都建议我不要在 NAS 上跑虚拟机和 Docker，也有同学给出了数据，4c16g 最多也就跑一个虚拟机和十来个 Docker 服务，我找了下群晖的产品，配置达到 4 核 16g 内存的产品，加上几块磁盘，价格随随便便上万，若真的期望储存和 CPU 都满足我的需求，怎么也得 6c32g，光群晖裸机的价格就得一万二，如果再考虑安全性，搞一个 raid5，一万大几的预算就没了。作为玩具，似乎没啥必要，最后退而求其次买了个稍微便宜点的：<br><img src="https://raw.githubusercontent.com/barretlee/blog/gh-pages/blogimgs/2021/06/22/1624293103199-7eacb55c-3a73-41b5-b1f1-e4f190d7a54f.png" alt="image"></p><p>倒不是说不建议花一两万，而是有更好的配置方案，让计算跟储存分离，配置一台 2u 的服务器，控制在七千的预算便可以获得 64g 内存以及 i3 甚至更高配的 CPU，然后加一个 4～6 盘位的群晖，价格也能控制到一万以内，如果需求没那么刚，还可以降低配置，将成本控制到七八千。我为了省事儿，也懒得折腾服务器，就选购了8G 内存的 920+，配置了 3 个盘位，足够我用好几年了。</p><p>如果是计算和储存分离，我可能会更加倾向 QNAP 了，与群晖相同价格的机器，配置会好不少。从操作系统的体验上，群晖会更加亲民，不过像我这种每天跟命令行打交道的人，UI 就无所谓了。</p><p>当然，选择 920+ 和 3 块酷狼盘也是有其他理由的：</p><p>大学就吃过硬盘的亏，两个 500G 的硬盘全坏了，现在想想，真的可惜了那上百 G 的种子🦜</p><p>所以 NAS 方案，我是肯定不会选 raid 0 的，而 raid 1 最起码得 10T 以上的盘才够用，价格高不说，再多盘位也没用，raid 6 费两块盘，安全性是多了，但是性能也下去了，综合考虑还是选了 raid 5。</p><p>raid 5 方案至少需要 3 块盘才能配，群晖的 plus 系列 220+ 和 720+ 就排除了，默认都是两盘位，420+ 可以满足需求，但是考虑到未来磁盘可能不够用的情况，还是选了可拓展的 920+。</p><p>红盘的坏盘率有点高，口碑也不好，希捷两类硬盘，酷狼盘和企业盘，后者质保更长，但是噪声略大，最后还是选了 3块 8T 的酷狼，不够了再加。</p><h2 id="数据方案"><a href="#数据方案" class="headerlink" title="数据方案"></a>数据方案</h2><p>NAS 组 raid 5 有不少朋友反馈，风险也挺大的，一般我们的硬盘都是同时间购买，使用寿命也差不多，这就容易在几年后出现多块盘稳定性同时不够的情况，当一块盘坏掉，在利用其它几块盘恢复这块的时候，其它几块盘的负载也就上去了，这个时候很可能出现雪崩问题。</p><p>我想了一下，有几个方案可以适当缓解问题，一个是增加盘位，让更多的盘一起扛负载，另外一个就是让盘的大小稍微偏小一些，比如购买 6TB 甚至 4TB 的盘，恢复速度更快。硬盘的寿命一般在 3<del>5 年，真正能抗 10 年的怕是不多，未来硬盘的价格还会持续下降，每隔 2</del>3 换一两块磁盘的必要性还是比较大的。</p><p>为了兼顾数据的读取速度和稳定性，也考虑到后期增加盘位时硬盘大小不一致带来的浪费问题，给群晖 NAS 配置了 SHR 储存方案。SHR 是对 raid1 和 raid5 的组合实现，详细研究了下这两种储存技术的实现原理：</p><p>对于 raid5，了解它可以阅读<a  target="_blank" href="https://post.smzdm.com/p/az5005qo/">这篇文章</a>，本质是利用异或运算做数据的奇偶校验，奇偶检验可以甄别 1 byte 数据的异常问题，它无法具体知道是哪 1 byte，但由于硬盘损坏具备位置确定性，利用这一点就可以很轻松地利用正常数据恢复异常盘位数据了。 raid5 损坏超过两块盘数据就不可恢复来，因此盘位越多，同时损坏多块盘的概率也就越大，可以说 3 块盘的 raid5 安全性从概率上来讲应该是最高的了。</p><p>raid1 是数据的 1:1 备份，SHR 是以最小盘容量为基准在做完 raid5 以后，剩下的两块储存会做 raid1，最后一块盘上多出来的空间会废弃。关于 raid1，<a  target="_blank" href="https://www.cnblogs.com/ivictor/p/6099807.html">这篇文章</a>解释的还比较详细，raid1 的特点就是数据写入较慢，比 raid5 要慢很多，但是 raid1 的储存空间在硬盘储存前期是不会被用到的，因为需要先将 raid5 的空间存满。</p><p>SHR 虽然可以提升硬盘的空间利用率，但是一旦出故障，恢复起来的难度也会稍微高一些，首先需要找到所有盘上 raid5 和 raid1 的扇区分区位置，然后需要对应地通过不同的算法来恢复数据，当然，成本也不算特别高，至少出现问题，拿着专业的数据恢复工具，我还是有信心可以恢复原始数据的。</p><p>我一直担心断电对磁盘和数据一致性的影响，恰巧在购买群晖的第二周，小区断电一次，当时心里慌慌的，感觉弄好的配置啥的会因为断电，导致数据丢失，配置异常，甚至开不了机，大约半小时电力恢复以后，长按开机键，等待绿灯闪烁，打开群晖的 Web 界面，果然……还是自己想多了，一点事儿没有-_-||</p><h2 id="群晖系统和软件"><a href="#群晖系统和软件" class="headerlink" title="群晖系统和软件"></a>群晖系统和软件</h2><p>之前在团队周会分享的时候有详细介绍过对 NAS 的选购、数据方案和软件介绍，但那个时候我对群晖只能说知道个皮毛，也就是把 Virtual Machine 跑了起来，把它当做了一个云盘工具，买回来折腾了三五天以后，就挂机闲置了半年，直到近期在重新整理个人数据的时候，又重新把这个大玩具捡了起来。</p><p>群晖的套件中心提供了非常多的应用，基本可以满足日常的数据管理需求：<br><img src="https://raw.githubusercontent.com/barretlee/blog/gh-pages/blogimgs/2021/06/22/1624294223228-cacbcfa0-592a-4e84-a52b-fa6d9dfbee58.png" alt="image"></p><p>将内网的服务暴露到公网的方案非常多，路由层可以做，NAS 层也可以做，我使用的是 Dnspod 提供的 DNS 解析服务，以及腾讯云提供的免费 SSL 证书，在云上申请好证书，然后下载下来，在 <code>控制面板 &gt; 安全性 &gt; 证书</code> 初可以完成证书的上传和配置。</p><h3 id="MariaDB"><a href="#MariaDB" class="headerlink" title="MariaDB"></a>MariaDB</h3><p>在群晖上折腾最多的，还是 SSH 上去后，通过命令行安装软件，如何将服务暴露到外网，就拿 MariaDB 来说，首先需要去 <code>/var/packages/MariaDB10/etc</code> 增加 <code>my.cnf</code> 文件，并修改配置，</p><h1 id="默认是-127-0-0-1，也就是只能通过本地环回网络打开"><a href="#默认是-127-0-0-1，也就是只能通过本地环回网络打开" class="headerlink" title="默认是 127.0.0.1，也就是只能通过本地环回网络打开"></a>默认是 127.0.0.1，也就是只能通过本地环回网络打开</h1><p>bind-address &#x3D; 0.0.0.0然后重启应用，<br>sudo &#x2F;usr&#x2F;syno&#x2F;bin&#x2F;synopkg restart MariaDB10这个时候就可以在外网直接访问 DB 访问了：<br>mysql -u root -h nas_domain.com -P 3307在陌生的系统中寻找各种配置真的是一件十分费劲的事情，网上找半天才能找到相关的问题，这里还是比较推荐去 Synology 的官网找资料，十分全面且基本准确。</p><h3 id="VirtualHere"><a href="#VirtualHere" class="headerlink" title="VirtualHere"></a>VirtualHere</h3><p>研究 NAS 的时候发现了一个有意思的软件，VirtualHere，通过它可以远程访问安装了 VirtualHere Server 的终端上的所有外接 USB 设备，而本地只需要安装一个 VirtualHere Client 就行了，使用起来十分便捷。其使用效果如同 USB 设备直接插在了本地终端的 USB 接口上，几乎没有区别，IO 速度会受网速影响，但如果是在同一个局域网，影响也是可以忽略的。</p><p>其原理是通过串口编程，在 Client 和 Server 之间实现了全部串口通讯协议，通过 Client 将指令传达到 Server 然后转发到 USB 串口。不过这个软件略贵，需要 50 美刀，家里的打印机、扫描仪等任何可以通过 USB 接入的设备都可以直接通过 VirtualHere 接入到网络，然后无缝对接到任何终端（Mac&#x2F;Linux&#x2F;Windows）上，就好像这些设备在你身边一样。</p><p>对比了下几款同类软件，USB Network Gate 是功能最全面的，但是价格也更高，需要 150 美刀，如果有相似需求，可以尝试下 VirtualHere，在受限情况下（一次只能共享一个 USB）可免费试用 10 天。</p><p>稍微研究了下它的签名策略，拿到 VirtualHere Server 所在终端的串口+硬件信息，然后将这些信息提交到它的官网，付完钱会把密钥发到你的邮箱，之后的 Client 和 Server 交互就跟它的官网没啥关系了。也就是说 Server 自己实现了整个解码逻辑。网上搜了下，果然有人把 VirtualHere 的汇编代码搬了出来，注释掉解码的逻辑就可以长期使用了。非完全破解，<a  target="_blank" href="http://weibo.cn/sinaurl?toasturl=https://grimore.org/cracks/virtualhere_usb/3.5.4">仅破解思路文章</a> ，请购买正版。</p><h3 id="Virtual-Machine"><a href="#Virtual-Machine" class="headerlink" title="Virtual Machine"></a>Virtual Machine</h3><p>如果家里设备比较多，路由器配置又比较一般，在网络流量比较大的时候，很可能会导致整个局域网通讯都处在半瘫痪状态，你可以跑过去重启下路由器，当然也可以考虑换一个一两千的高配路由，我最近还学了个其它的方法，安装软路由来解决问题，大致步骤是：</p><ol><li>先电话联系运营商停止光猫的自动拨号，也可以登录到设备自己设置，改成桥接到 ISP 的模式</li><li>关闭路由器的自动拨号，相当于让路由变成一个带无线接入能力的交换机，通过 LAN 口接入光猫</li><li>在内网一台设备上安装软路由，开启自动拨号和 DHCP，连接到交换机的另一个 LAN 口，此时内网的所有 IP 分配将由软路由接管</li></ol><p>可以买一台便宜的工控机专门运行软路由，如果家里有 NAS 的话，也可以将软路由跑在 NAS 上的虚拟机上。</p><p>只不过这里有个问题，假设软路由所在机器的网口和交换机（路由器）网口都是千兆，并且你的设备都是通过交换机上网，一旦有终端跑满从交换机到软路由的千兆带宽（高速 BT 或者大文件拷贝），那么其他终端接入网络就会出现塞车问题，怎么解呢？一般工控机和 NAS 都有双网卡，可以考虑再拉一根网线从软路由到交换机，这样软路由就可以输出两千兆的带宽到交换机了。<br><img src="https://raw.githubusercontent.com/barretlee/blog/gh-pages/blogimgs/2021/06/22/1624295423946-dcfc500e-9c7f-4fcc-92b6-3c1cad40b4d6.png" alt="image"></p><p>我在虚拟机上安装了两个系统，一个是 LEDE，另外一个是 Window7。上面说的软路由就是图中安装 LEDE。之所以会安装一个 Win7 系统，是偶尔需要用到招行香港银行的专业版交易工具，它只支持 Windows 系统。Virtual Machine 有一个好处，当你启动好系统以后，可以通过 Web 浏览器远程打开，这对我来说真是太方便了，利用 VirtualHere 还可以将 USB Key 随时分享给远程的 Windows 系统，十分便捷。</p><p>唯一的缺点就是 Windows 对内存和 CPU 的消耗太大了，每次为了打开这个远程系统，我都需要先去 NAS 上关闭几个略占内存的应用，比如 Plex、Docker-gitlab 等等。</p><h3 id="WordPress"><a href="#WordPress" class="headerlink" title="WordPress"></a>WordPress</h3><p>之所以近期去折腾 NAS，也是想起来之前给孩子记录生活的博客系统，由于之前在阿里云购买的机器到期未续费，博客停更了两年，看到群晖上可以部署 Nginx 和 Apache，认认真真的折腾了好几个晚上，把几乎所有你想得到的和想不到的坑都踩完了，然后把之前的那份 <code>wordpress.tar.gz</code> 重新部署到了私有数据中心：<br><img src="https://raw.githubusercontent.com/barretlee/blog/gh-pages/blogimgs/2021/06/22/1624296072815-19bd9b75-a5e5-457c-84a8-e6355f7ab516.png" alt="image"></p><p>目前运行起来还是非常稳定的，修复了几个 WordPress 发布慢的 bug。</p><h2 id="小记"><a href="#小记" class="headerlink" title="小记"></a>小记</h2><p>关于系统和软件部分，省略了几万字，折腾的过程中遇到的问题非常多，但大多数都是命令行操作时遇到的，为了让所有对外的服务都是 HTTPS 的，并且增加几道安全防火墙，不得不把系统研究得透透的。</p><p>总的来说，目前的 NAS 已经可以满足我的基本需要和进阶需要了，而且在折腾和学习的过程中，还养成了把自己做的各种程序封装成 Docker 应用的习惯，也摸索了一些比较有意思的实践，后续有空可以聊聊，今天先到这里。</p></div></div><div class="copyright" itemscope itemtype="http://schema.org/ProfilePage" tabindex="0" aria-hidden="true"><ul><li>作者: <a href="/about/" itemprop="name">Barret李靖</a></li><li>文章分类: <a class="category-link" href="/blog/categories/%E8%A7%82%E7%82%B9%E5%92%8C%E6%84%9F%E6%83%B3/">观点和感想</a></li><li>文章标签: <a class="article-tag-none-link" href="/blog/tags/%E5%B0%8F%E8%83%A1%E5%AD%90%E5%93%A5%E7%9A%84%E6%80%9D%E6%BA%90%E5%9C%B0/" rel="tag">小胡子哥的思源地</a></li><li>发表日期: 2021-06-22 12:13:48</li><li>最后编辑时间: 2025-07-19 11:01:03</li><li>本文 Markdown 地址: <a target="_
			" href="https://github.com/barretlee/blog/tree/master/blog/src/_posts/2021-06-22-rvls1e.md">群晖 NAS 折腾小记</a></li><li>版权声明：<a  target="_blank" href="https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">CC BY-NC-ND 3.0</a></li><li>Feed 订阅: <a href="/rss2.xml"><i class="icon">&#x25c8;</i></a><div style="opacity:.3;text-align:right;margin:5px -5px -10px 0;float:right;font-size:12px">编辑本文：<a  target="_blank" href="https://github.com/barretlee/blog/edit/master/blog/src/_posts/2021-06-22-rvls1e.md" target="_blank" aria-hidden="true"><i class="icon">&#xe622;</i></a>； 新建文章：<a  target="_blank" href="https://github.com/barretlee/blog/new/master/blog/src/_posts" target="_blank" aria-hidden="true"><i class="icon">&#xe616;</i></a></div></li></ul><a href="/about/"><img style="max-width:120px" src="https://img.alicdn.com/imgextra/i3/O1CN01tDYnfz23AWT1ag79p_!!6000000007215-2-tps-1200-1200.png"></a></div><em class="arrow-expend" tabindex="0" aria-hidden="0" aria-label="点击展开网页导航" aria-selected="true" aria-lable="网页导航" aria-expanded="false" id="i1">▾<ul role="group" aria-labelledby="i1" aria-expanded="false"><li><a href="/entry/">博客</a></li><li><a href="/message/">留言</a></li><li><a href="/demo/">实验室</a></li><li><a href="/friends/">友情链接</a></li></ul></em></div><div class="post-relative"><div class="page-relative"><a href="/blog/2021/07/07/kc4bfb/" class="post-prev"><i class="icon" tabindex="0" aria-hidden="true">&#x261c;</i> <span class="aria-readonly">上一篇文章</span> <b>技术《Kubernetes 权威指南》</b> </a><a href="/blog/2021/06/22/gqg6fm/" class="post-next"><span class="aria-readonly">下一篇文章</span> <b>趣味《人类简史》</b> <i class="icon" tabindex="0" aria-hidden="true">&#xe602;</i></a></div><div class="page-relative-fixed" tabindex="0" aria-hidden="true"><a href="/blog/2021/07/07/kc4bfb/" class="prev" title="技术《Kubernetes 权威指南》"><i class="icon">&#xe600;</i> <b>技术《Kubernetes 权威指南》</b> </a><a href="/blog/2021/06/22/gqg6fm/" class="next" title="趣味《人类简史》"><i class="icon">&#x261e;</i> <b>趣味《人类简史》</b></a></div></div></div><div class="sidebar" tabindex="0" aria-hidden="true"><div class="func-btns func-btns-up"><span class="func-item"><i class="func-nav icon">&#xe618;<span>目录</span></i><div><i class="left-arrow"></i><i class="left-arrow-clone"></i> <a href="javascript:void(0);" onclick="return!1">显示目录</a></div></span><span class="func-item"><i class="func-font icon">&#xe604;<span>夜间</span></i><div class="font-choose-box"><i class="left-arrow"></i><i class="left-arrow-clone"></i><div class="font-choose bg-choose"><a href="javascript:void(0)" onclick="return!1" class="bg-type bg-type-sun font-type-song"><i class="icon">&#xe61a;</i></a> <a href="javascript:void(0)" onclick="return!1" class="bg-type bg-type-moon font-type-hei"><i class="icon">&#xe619;</i></a></div></div></span><span class="func-item"><i class="func-about icon">&#x263b;<span>关于</span></i><div><i class="left-arrow"></i><i class="left-arrow-clone"></i><p><a href="/about/" class="func-about-link" target="_blank">关于作者</a></p><div id="followMeOnWeibo"></div></div></span></div><div class="func-btns"><span class="func-item"><a href="/friends/" target="_blank"><i class="func-rss icon">&#xe601;<span>链接</span></i></a><div><i class="left-arrow"></i><i class="left-arrow-clone"></i> <a href="/friends/" target="_blank">友情链接</a></div></span><span class="func-item"><a href="/rss2.xml" target="_blank"><i class="func-rss icon">&#x25c8;<span>订阅</span></i></a><div><i class="left-arrow"></i><i class="left-arrow-clone"></i><a href="/rss2.xml" target="_blank">订阅我吧！</a></div></span></div></div><div class="single-page-footer"><div class="footer"><div class="footer-wraper"><div class="footer-content"><div class="footer-nav"><a href="javascript: void(0);" class="ds-thread-count disqus-comment-count" data-thread-key="rvls1e" data-disqus-identifier="rvls1e" tabindex="0" aria-hidden="true">评论内容</a> <a href="javascript: void(0);" id="comments">相关文章</a> <a href="/friends/" tabindex="0" aria-hidden="true" style="display:none">友情链接</a></div><div class="nav-detail"><div tabindex="0"><div id="gitalk" sid="rvls1e"></div><script charset="utf-8" type="text/javascript" src="https://fastly.jsdelivr.net/gh/barretlee/blog@gh-pages/public/js/gitalk.js"></script><script type="text/javascript">var postContent=document.querySelectorAll(".post-content>p");postContent&&postContent.length&&(postContent=(postContent=postContent.item(0).textContent+(postContent.item(1)&&postContent.item(1).textContent||"")).length>140?postContent.slice(0,140)+"...":postContent);var gitalk=new Gitalk({clientID:"50a1b3aa7854b01a1c85",clientSecret:"226ac154f80a6aea0985da874126b35795f22eed",language:"zh-CN",perPage:100,createIssueManually:!1,repo:"blog",owner:"barretlee",admin:["barretlee"],id:"rvls1e",body:"原文地址："+location.href+"\n\n文摘："+postContent,distractionFreeMode:!1});window.addEventListener("load",(function(){gitalk.render("gitalk")}));var commentTimer=setInterval(()=>{var t=document.querySelector(".gt-link-counts"),e=document.querySelector(".hash-to-comments");t&&e&&(e.textContent=t.textContent,clearInterval(commentTimer))},500);setTimeout(()=>{clearInterval(commentTimer)},6e4)</script></div><div style="display:block"><div class="relative-wrapper"><div class="relative-article"><ul><li><span><font aria-hidden="true">2023-06-26 »</font> </span><a href="/blog/2023/06/26/blog-writer/">还写博客么？</a> <span class="aria-readonly">发表时间为2023年06月26日</span><div class="relative-box"><span class="aria-readonly">文章概要 </span>随着云计算和人工智能的发展，Web 3.0 悄然来袭，没有哪个标志性的事件宣布 Web 2.0 走进了尾声，但可以这么说，在发展不均衡的时代背景下，Web 2.0 很长一段时间都不会消失，它只不过不再是这个时代的主角了。本博客从 2013 ...</div></li><li><span><font aria-hidden="true">2022-09-18 »</font> </span><a href="/blog/2022/09/18/gvnty0/">读书笔记《当呼吸化为空气》</a> <span class="aria-readonly">发表时间为2022年09月18日</span><div class="relative-box"><a href="/blog/2022/09/18/gvnty0/" class="relative-img-wrapper"><img src="https://raw.githubusercontent.com/barretlee/blog/gh-pages/blogimgs/2022/09/18/1663503657876-671e3d78-9256-41b4-a7c3-028a9e157359.png" style="width:100%" loading="lazy" data-original="/../blogimgs/2022/09/18/1663503657876-671e3d78-9256-41b4-a7c3-028a9e157359.png"></a><span class="aria-readonly">文章概要 </span>作者：保罗·卡拉尼什保罗一生都在追寻生命的意义。“I can’t go on, I’ll go on”，看到最后才明白，我无法前行——没有办法继续从事热衷的事业；我仍将前行——因为还活着，还在追寻生命的意义，弃（转）医从文可以帮助我继续前行...</div></li><li><span><font aria-hidden="true">2022-08-05 »</font> </span><a href="/blog/2022/08/05/bicgb6/">云服务使用过程的问题小记</a> <span class="aria-readonly">发表时间为2022年08月05日</span><div class="relative-box"><span class="aria-readonly">文章概要 </span>记录最近使用基础云设施的过程中遇到的几个有意思的问题：1、OceanBase 数据库锁问题给业务数据模型扩充了一个远程方法调用，利用 ORM 的 hooks 特性加到了 afterCreate 中，导致偶发数据库锁。原因是业务存在事务处理批...</div></li><li><span><font aria-hidden="true">2022-08-05 »</font> </span><a href="/blog/2022/08/05/dzrya3/">孩子出生第一天的一些点滴</a> <span class="aria-readonly">发表时间为2022年08月05日</span><div class="relative-box"><a href="/blog/2022/08/05/dzrya3/" class="relative-img-wrapper"><img src="https://raw.githubusercontent.com/barretlee/blog/gh-pages/blogimgs/2022/08/05/1659686204403-d9b72546-5b51-4bc0-94c6-69a2888c8b09.jpeg" style="width:100%" loading="lazy" data-original="/../blogimgs/2022/08/05/1659686204403-d9b72546-5b51-4bc0-94c6-69a2888c8b09.jpeg"></a><span class="aria-readonly">文章概要 </span>今天是个特别的日子，家中又迎来了一位小公主，生第一胎的时候，懵懵懂懂，啥也不会，孩子哭了，就等着月嫂过来照顾，看着学着，也没摸出多少门道，等月嫂走了，连忙又签约了一名家庭医生，闲暇之余，就是各种阅读育儿说明书，忙起来的时候也是一地鸡毛。二娃...</div></li></ul></div></div><div class="relative-to-comment" tabindex="0" aria-hidden="true"><span>留下评论</span></div></div><div class="friends-box"><ul><li><a  target="_blank" href="http://hustskyking.cnblogs.com" target="_blank">旧博客</a> <font aria-hidden="true">»</font> <span>我的旧博客（博客园荣誉博客）</span></li><li><a  target="_blank" href="http://www.zhangmengxue.com" target="_blank">大额</a> <font aria-hidden="true">»</font> <span>大额大额哼歌等日落</span></li><li><a  target="_blank" href="http://www.zhangxinxu.com" target="_blank">张鑫旭</a> <font aria-hidden="true">»</font> <span>原来大学我俩一个团队的~</span></li><li><a  target="_blank" href="http://web-tinker.com" target="_blank">次碳酸钴</a> <font aria-hidden="true">»</font> <span>深度交流的一个好朋友</span></li><li><a  target="_blank" href="http://imququ.com" target="_blank">屈屈</a> <font aria-hidden="true">»</font> <span>蛐蛐同学</span></li><li><a  target="_blank" href="http://www.ruanyifeng.com" target="_blank">阮一峰</a> <font aria-hidden="true">»</font> <span>阮老师</span></li><li><a href="/friends/">更多列表 <font aria-hidden="true">»</font></a></li></ul></div></div><div class="website-info" aria-hidden="true"><a class="page_editor" href="/admin/#/posts/cmd9nvpif012aqk9bh8chhwjv" target="_blank">🙈</a> <span>&copy;2013-2025 <small><a  target="_blank" href="https://www.miit.gov.cn/" about="_blank">湘ICP备14007107号-1</a></small></span> 本站由 <a href="/">Barret李靖</a> 纯手工打造 | <a href="/about#contact">联系方式</a> <a  target="_blank" href="https://union.zhaodao.ai/#random" title="随机跳转到一个有意思的网站" target="_blank" class="zhidao_ai"><img src="https://img.alicdn.com/imgextra/i2/O1CN01VjiZUL1r0eXge4taM_!!6000000005569-55-tps-300-300.svg" width="20" height="20"></a></div></div></div></div></div><div class="tools-wrapper" tabindex="0" aria-hidden="true"><a class="gotop icon" href="#" title="回到顶部">&#x2191;</a><a class="hash-to-comments icon" title="我要评论">&#x2121;</a></div><div class="fixerr" tabindex="0" aria-hidden="true">纠错模式</div></body><script src="https://fastly.jsdelivr.net/gh/barretlee/blog@gh-pages/public/js/jquery.js"></script><script src="https://fastly.jsdelivr.net/gh/barretlee/blog@gh-pages/public/js/main.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-67248043-3"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-67248043-3")</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?3524fff9629f2c80f8ea5daa13e67003";var t=document.getElementsByTagName("script")[0];t.async=!0,t.parentNode.insertBefore(e,t)}()</script><script>window.onerror=function(o){window.console&&window.console.log&&window.console.log(o);try{$("#loadLayer").remove()}catch(o){}return!0}</script></html>